{"ast":null,"code":"import _taggedTemplateLiteral from \"/home/artemiza/Desktop/pelis/node_modules/next/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/home/artemiza/Desktop/pelis/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/artemiza/Desktop/pelis/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/artemiza/Desktop/pelis/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  input {\\n    max-width: 200px;\\n  }\\n  i {\\n    height: 2em;\\n    width: 2em;\\n    color: black;\\n  }\\n  button {\\n    width: auto;\\n    display:none;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { useStateValue } from \"../../store/stateProvider\";\nimport { actionTypes } from \"../../store/reducer\";\nimport fetch from 'isomorphic-fetch';\nvar accessToken = \"6f633e37\";\nexport var Search = function Search(props) {\n  var _useState = useState(\"\"),\n      input = _useState[0],\n      setInput = _useState[1];\n\n  var _useStateValue = useStateValue(),\n      _useStateValue2 = _slicedToArray(_useStateValue, 2),\n      data = _useStateValue2[0],\n      dispatch = _useStateValue2[1];\n\n  var onSearchSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var res, pelis;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              _context.next = 3;\n              return fetch(\"https://www.omdbapi.com/?apikey=\".concat(accessToken, \"&s=\").concat(input, \"&page=2\"));\n\n            case 3:\n              res = _context.sent;\n              _context.next = 6;\n              return res.json();\n\n            case 6:\n              pelis = _context.sent;\n              addData(pelis);\n              console.log(pelis, \"respuesta pedido\");\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onSearchSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var addData = function addData(data) {\n    dispatch({\n      type: actionTypes.ADD_DATA,\n      data: data\n    });\n  };\n\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var res, pelis;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!(!input && data.films.length == 0)) {\n              _context2.next = 8;\n              break;\n            }\n\n            _context2.next = 3;\n            return fetch(\"https://www.omdbapi.com/?apikey=\".concat(accessToken, \"&s=marvel&page=3\"));\n\n          case 3:\n            res = _context2.sent;\n            _context2.next = 6;\n            return res.json();\n\n          case 6:\n            pelis = _context2.sent;\n            addData(pelis);\n\n          case 8:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  })), [input]);\n  return /*#__PURE__*/_jsx(SearchContainer, {\n    children: /*#__PURE__*/_jsxs(\"form\", {\n      onSubmit: onSearchSubmit,\n      children: [/*#__PURE__*/_jsx(\"input\", {\n        onChange: function onChange(e) {\n          return setInput(e.target.value);\n        },\n        type: \"input\",\n        placeholder: \"buscar...\"\n      }), /*#__PURE__*/_jsx(\"button\", {\n        type: \"submit\"\n      })]\n    })\n  });\n};\nvar SearchContainer = styled.div(_templateObject());","map":null,"metadata":{},"sourceType":"module"}